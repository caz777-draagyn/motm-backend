# Promotion/Relegation Rules

## League Structure
- **Tier 1**: 1 division, 18 teams (34 games: each team plays every other team twice)
- **Tier 2**: 2 divisions, 18 teams each (34 games per division)
- **Tier 3**: 4 divisions, 18 teams each (34 games per division)
- **Tier 4**: 12 divisions, 18 teams each (34 games per division)
- **Tier 5+**: Each tier has 3x the divisions of the tier above

## Division Matching Pattern

For promotion/relegation between tiers where the lower tier has 3x the divisions:
- Tier 3 Division 1 ↔ Tier 4 Divisions 1, 2, 3
- Tier 3 Division 2 ↔ Tier 4 Divisions 4, 5, 6
- Tier 3 Division 3 ↔ Tier 4 Divisions 7, 8, 9
- Tier 3 Division 4 ↔ Tier 4 Divisions 10, 11, 12

This pattern continues for lower tiers (e.g., Tier 4 Div 1 ↔ Tier 5 Divs 1, 2, 3).

## Tier 1 ↔ Tier 2 Promotion/Relegation

### Tier 1 → Tier 2 Relegation

#### Direct Relegation
- **Positions 15-18**: 4 teams directly relegated to Tier 2
- Distributed across Tier 2 divisions (2 per division)

#### Relegation Playoff
- **Positions 13-14**: 2 teams enter relegation playoff
- These teams compete in separate playoff brackets (see below)

### Tier 2 → Tier 1 Promotion

#### Direct Promotion
- **Top 2 from each division**: 4 teams total directly promoted to Tier 1
- 2 teams from Division 1, 2 teams from Division 2

#### Promotion Playoff
- **Positions 2-3 from each division**: 4 teams total enter promotion playoff
- 2 teams from Division 1 (positions 2-3)
- 2 teams from Division 2 (positions 2-3)

### Playoff Structure (Tier 1 ↔ Tier 2)

There are **two separate playoff brackets**, each finding 1 winner who gets a Tier 1 spot for next season. **Brackets cross divisions** to avoid teams from the same division meeting each other.

#### Bracket 1
1. **Semifinal**: 
   - Tier 2 Division 1, Position 3 vs Tier 1 Position 13
2. **Final**:
   - Tier 2 Division 2, Position 2 (crossed over from Div 2) vs Winner of Semifinal
3. **Winner**: Gets Tier 1 spot

#### Bracket 2
1. **Semifinal**: 
   - Tier 2 Division 2, Position 3 vs Tier 1 Position 14
2. **Final**:
   - Tier 2 Division 1, Position 2 (crossed over from Div 1) vs Winner of Semifinal
3. **Winner**: Gets Tier 1 spot

## Tier 2 ↔ Tier 3 Promotion/Relegation

### Tier 2 → Tier 3 Relegation

#### Direct Relegation
- **Bottom 2 from each division**: 4 teams total directly relegated to Tier 3
- Distributed across Tier 3 divisions (1 per division)

#### Relegation Playoff
- **Positions 15-16 from each division**: 4 teams total enter relegation playoff
- 2 teams from Division 1 (positions 15-16)
- 2 teams from Division 2 (positions 15-16)
- These compete in 4 separate playoff brackets (see below)

### Tier 3 → Tier 2 Promotion

#### Direct Promotion
- **Top 2 from each division**: 8 teams total directly promoted to Tier 2
- 2 teams from each of the 4 Tier 3 divisions
- Distributed across Tier 2 divisions (4 per division)

#### Promotion Playoff
- **Positions 2-3 from each division**: 8 teams total enter promotion playoff
- 2 teams from each of the 4 Tier 3 divisions (positions 2-3)
- These compete in 4 separate playoff brackets (see below)

### Playoff Structure (Tier 2 ↔ Tier 3)

There are **four separate playoff brackets**, each finding 1 winner who gets a Tier 2 spot for next season. **Brackets cross divisions** to avoid teams from the same division meeting each other.

#### Bracket 1
1. **Semifinal**: 
   - Tier 3 Division 1, Position 3 vs Tier 2 Division 1, Position 16
2. **Final**:
   - Tier 3 Division 2, Position 2 (crossed over) vs Winner of Semifinal
3. **Winner**: Gets Tier 2 spot

#### Bracket 2
1. **Semifinal**: 
   - Tier 3 Division 2, Position 3 vs Tier 2 Division 1, Position 15
2. **Final**:
   - Tier 3 Division 3, Position 2 (crossed over) vs Winner of Semifinal
3. **Winner**: Gets Tier 2 spot

#### Bracket 3
1. **Semifinal**: 
   - Tier 3 Division 3, Position 3 vs Tier 2 Division 2, Position 16
2. **Final**:
   - Tier 3 Division 4, Position 2 (crossed over) vs Winner of Semifinal
3. **Winner**: Gets Tier 2 spot

#### Bracket 4
1. **Semifinal**: 
   - Tier 3 Division 4, Position 3 vs Tier 2 Division 2, Position 15
2. **Final**:
   - Tier 3 Division 1, Position 2 (crossed over) vs Winner of Semifinal
3. **Winner**: Gets Tier 2 spot

## Tier 3 ↔ Tier 4 Promotion/Relegation

### Tier 3 → Tier 4 Relegation

#### Direct Relegation
- **Bottom 2 from each division**: 8 teams total directly relegated to Tier 4
- Distributed across Tier 4 divisions (1 per division, matching pattern: Div 1→Div 1, Div 2→Div 4, Div 3→Div 7, Div 4→Div 10)

#### Relegation Playoff
- **Positions 15-16 from each division**: 8 teams total enter relegation playoff
- 2 teams from each of the 4 Tier 3 divisions (positions 15-16)
- These compete in 12 separate playoff brackets (3 per Tier 3 division, see below)

### Tier 4 → Tier 3 Promotion

#### Direct Promotion
- **Top 1 from each division**: 12 teams total directly promoted to Tier 3
- 1 team from each of the 12 Tier 4 divisions
- Distributed across Tier 3 divisions (3 per division, matching pattern: Divs 1-3→Div 1, Divs 4-6→Div 2, Divs 7-9→Div 3, Divs 10-12→Div 4)

#### Promotion Playoff
- **Positions 2-3 from each division**: 24 teams total enter promotion playoff
- 2 teams from each of the 12 Tier 4 divisions (positions 2-3)
- These compete in 12 separate playoff brackets (3 per Tier 3 division, see below)

### Playoff Structure (Tier 3 ↔ Tier 4)

There are **12 separate playoff brackets** (3 brackets per Tier 3 division), each finding 1 winner who gets a Tier 3 spot for next season. **Brackets cross divisions** to avoid teams from the same division meeting each other.

**Matching Pattern**: Each Tier 3 division is matched with 3 Tier 4 divisions:
- Tier 3 Div 1 ↔ Tier 4 Divs 1, 2, 3
- Tier 3 Div 2 ↔ Tier 4 Divs 4, 5, 6
- Tier 3 Div 3 ↔ Tier 4 Divs 7, 8, 9
- Tier 3 Div 4 ↔ Tier 4 Divs 10, 11, 12

#### Brackets for Tier 3 Division 1 (Tier 4 Divisions 1, 2, 3)

**Bracket 1:**
1. **Semifinal**: 
   - Tier 4 Division 1, Position 3 vs Tier 3 Division 1, Position 16
2. **Final**:
   - Tier 4 Division 2, Position 2 (crossed over) vs Winner of Semifinal
3. **Winner**: Gets Tier 3 Division 1 spot

**Bracket 2:**
1. **Semifinal**: 
   - Tier 4 Division 2, Position 3 vs Tier 3 Division 1, Position 15
2. **Final**:
   - Tier 4 Division 3, Position 2 (crossed over) vs Winner of Semifinal
3. **Winner**: Gets Tier 3 Division 1 spot

**Bracket 3:**
1. **Semifinal**: 
   - Tier 4 Division 3, Position 3 vs Tier 3 Division 1, Position 14 (if applicable, or lowest playoff position)
2. **Final**:
   - Tier 4 Division 1, Position 2 (crossed over) vs Winner of Semifinal
3. **Winner**: Gets Tier 3 Division 1 spot

#### Brackets for Tier 3 Division 2 (Tier 4 Divisions 4, 5, 6)

**Bracket 4:**
1. **Semifinal**: 
   - Tier 4 Division 4, Position 3 vs Tier 3 Division 2, Position 16
2. **Final**:
   - Tier 4 Division 5, Position 2 (crossed over) vs Winner of Semifinal
3. **Winner**: Gets Tier 3 Division 2 spot

**Bracket 5:**
1. **Semifinal**: 
   - Tier 4 Division 5, Position 3 vs Tier 3 Division 2, Position 15
2. **Final**:
   - Tier 4 Division 6, Position 2 (crossed over) vs Winner of Semifinal
3. **Winner**: Gets Tier 3 Division 2 spot

**Bracket 6:**
1. **Semifinal**: 
   - Tier 4 Division 6, Position 3 vs Tier 3 Division 2, Position 14 (if applicable)
2. **Final**:
   - Tier 4 Division 4, Position 2 (crossed over) vs Winner of Semifinal
3. **Winner**: Gets Tier 3 Division 2 spot

#### Brackets for Tier 3 Division 3 (Tier 4 Divisions 7, 8, 9)

**Bracket 7:**
1. **Semifinal**: 
   - Tier 4 Division 7, Position 3 vs Tier 3 Division 3, Position 16
2. **Final**:
   - Tier 4 Division 8, Position 2 (crossed over) vs Winner of Semifinal
3. **Winner**: Gets Tier 3 Division 3 spot

**Bracket 8:**
1. **Semifinal**: 
   - Tier 4 Division 8, Position 3 vs Tier 3 Division 3, Position 15
2. **Final**:
   - Tier 4 Division 9, Position 2 (crossed over) vs Winner of Semifinal
3. **Winner**: Gets Tier 3 Division 3 spot

**Bracket 9:**
1. **Semifinal**: 
   - Tier 4 Division 9, Position 3 vs Tier 3 Division 3, Position 14 (if applicable)
2. **Final**:
   - Tier 4 Division 7, Position 2 (crossed over) vs Winner of Semifinal
3. **Winner**: Gets Tier 3 Division 3 spot

#### Brackets for Tier 3 Division 4 (Tier 4 Divisions 10, 11, 12)

**Bracket 10:**
1. **Semifinal**: 
   - Tier 4 Division 10, Position 3 vs Tier 3 Division 4, Position 16
2. **Final**:
   - Tier 4 Division 11, Position 2 (crossed over) vs Winner of Semifinal
3. **Winner**: Gets Tier 3 Division 4 spot

**Bracket 11:**
1. **Semifinal**: 
   - Tier 4 Division 11, Position 3 vs Tier 3 Division 4, Position 15
2. **Final**:
   - Tier 4 Division 12, Position 2 (crossed over) vs Winner of Semifinal
3. **Winner**: Gets Tier 3 Division 4 spot

**Bracket 12:**
1. **Semifinal**: 
   - Tier 4 Division 12, Position 3 vs Tier 3 Division 4, Position 14 (if applicable)
2. **Final**:
   - Tier 4 Division 10, Position 2 (crossed over) vs Winner of Semifinal
3. **Winner**: Gets Tier 3 Division 4 spot

## Summary

### Tier 1 ↔ Tier 2
- **4 teams** directly relegated from Tier 1
- **4 teams** directly promoted from Tier 2
- **2 playoff brackets** determine 2 additional Tier 1 spots
- **Total Tier 1 spots**: 18 (4 relegated + 2 playoff losers = 6 spots available, filled by 4 direct promotions + 2 playoff winners)

### Tier 2 ↔ Tier 3
- **4 teams** directly relegated from Tier 2 (2 per division)
- **8 teams** directly promoted from Tier 3 (2 per division)
- **4 playoff brackets** determine 4 additional Tier 2 spots
- **Total Tier 2 spots**: 36 (4 relegated + 4 playoff losers = 8 spots available, filled by 8 direct promotions + 4 playoff winners)

### Tier 3 ↔ Tier 4
- **8 teams** directly relegated from Tier 3 (2 per division)
- **12 teams** directly promoted from Tier 4 (1 per division)
- **12 playoff brackets** determine 12 additional Tier 3 spots (3 per Tier 3 division)
- **Total Tier 3 spots**: 72 (8 relegated + 12 playoff losers = 20 spots available, filled by 12 direct promotions + 12 playoff winners)

## Implementation Notes
- The `tier_rules()` function in `seeds/league_factory.py` defines the promotion/relegation counts
- Playoff bracket logic needs to be implemented in the season end processing
- **Key principle**: Playoff brackets always cross divisions to avoid same-division matchups
- **Division matching**: Lower tier divisions are grouped in sets of 3, matched to the tier above (e.g., Tier 4 Divs 1-3 → Tier 3 Div 1)
- The pattern continues for lower tiers (Tier 4 ↔ Tier 5, etc.) with the same structure
